import{_ as t,r as p,o as c,c as i,a as s,d as n,b as e,e as l}from"./app-CUvyzFzm.js";const r="/document/images/sqlserver-profiler/start-menu.png",o="/document/images/sqlserver-profiler/ssms-menu.png",d="/document/images/sqlserver-profiler/template1.png",u="/document/images/sqlserver-profiler/template2.png",v="/document/images/sqlserver-profiler/template3.png",k="/document/images/sqlserver-profiler/template4.png",m="/document/images/sqlserver-profiler/template5.png",b="/document/images/sqlserver-profiler/start-profiler.png",_="/document/images/sqlserver-profiler/stop-profiler.png",h="/document/images/sqlserver-profiler/file-profiler.png",g="/document/images/sqlserver-profiler/eg-1.png",f="/document/images/sqlserver-profiler/eg-2.png",q={},x=s("blockquote",null,[s("p",null,"ğŸ“ƒç‰ˆæœ¬: 1.2"),s("p",null,"ğŸ“†æ—¥æœŸ: 2021-07-26")],-1),w=s("h1",{id:"sql-server-profiler-ç®€ä»‹",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#sql-server-profiler-ç®€ä»‹"},[s("span",null,"SQL Server Profiler ç®€ä»‹")])],-1),y=s("p",null,"SQL Server Profiler æ˜¯ä¸€ä¸ªå›¾å½¢ç•Œé¢å·¥å…·ï¼Œç”¨äºåˆ›å»ºå’Œç®¡ç†è·Ÿè¸ªå¹¶åˆ†æå’Œé‡æ’­è·Ÿè¸ªç»“æœã€‚ è¿™äº›äº‹ä»¶ä¿å­˜åœ¨ä¸€ä¸ªè·Ÿè¸ªæ–‡ä»¶ä¸­ï¼Œç¨åè¯Šæ–­é—®é¢˜æ—¶ï¼Œå¯ä»¥å¯¹è¯¥æ–‡ä»¶è¿›è¡Œåˆ†ææˆ–ç”¨å®ƒæ¥é‡æ’­ä¸€ç³»åˆ—ç‰¹å®šçš„æ­¥éª¤ã€‚",-1),S={href:"https://docs.microsoft.com/zh-cn/sql/relational-databases/extended-events/quick-start-extended-events-in-sql-server?view=sql-server-ver15",target:"_blank",rel:"noopener noreferrer"},T=l('<hr><h1 id="sql-server-profiler-è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#sql-server-profiler-è¿è¡Œ"><span>SQL Server Profiler è¿è¡Œ</span></a></h1><ol><li>ä» Windowsâ€œå¼€å§‹â€èœå•å¯åŠ¨ SQL Server Profiler</li></ol><p><img src="'+r+'" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><ol start="2"><li>åœ¨ SQL Server Management Studio çš„â€œå·¥å…·â€èœå•ä¸­ï¼Œå•å‡»â€œSQL Server Profilerâ€ <img src="'+o+'" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li></ol><hr><h1 id="è·Ÿè¸ªç®¡ç†" tabindex="-1"><a class="header-anchor" href="#è·Ÿè¸ªç®¡ç†"><span>è·Ÿè¸ªç®¡ç†</span></a></h1><h2 id="å¯¼å…¥è·Ÿè¸ªæ¨¡æ¿" tabindex="-1"><a class="header-anchor" href="#å¯¼å…¥è·Ÿè¸ªæ¨¡æ¿"><span>å¯¼å…¥è·Ÿè¸ªæ¨¡æ¿</span></a></h2><ol><li>è‹¥ç³»ç»Ÿå…³è”äº†æ‰©å±•åï¼Œåˆ™å¯ä»¥ç›´æ¥åŒå‡».tdfæ¨¡æ¿æ–‡ä»¶ã€‚</li></ol><p><img src="'+d+'" alt="è¾“å…¥å›¾ç‰‡è¯´æ˜"></p><p>2.åŒå‡».tdfæ¨¡æ¿æ–‡ä»¶åï¼Œä¼šè‡ªåŠ¨æ‰“å¼€SQL Server Profilerå¹¶æ˜¾ç¤ºæ¨¡æ¿æ·»åŠ æˆåŠŸæç¤ºã€‚</p><p><img src="'+u+'" alt="è¾“å…¥å›¾ç‰‡è¯´æ˜"></p><ol start="3"><li>è‹¥ç¬¬1æ­¥è‡ªåŠ¨æ·»åŠ å¤±è´¥ï¼Œåˆ™è¯·åœ¨ â€œæ–‡ä»¶â€ èœå•ä¸Šï¼Œå•å‡» â€œæ¨¡æ¿â€ ï¼Œå†å•å‡» â€œå¯¼å…¥æ¨¡æ¿â€ ã€‚</li></ol><p><img src="'+v+'" alt="å¯¼å…¥æ¨¡æ¿"></p><ol start="4"><li><p>åœ¨â€œæ‰“å¼€æ–‡ä»¶â€å¯¹è¯æ¡†ä¸­ï¼Œé€‰æ‹©è¦å¯¼å…¥çš„è·Ÿè¸ªæ¨¡æ¿æ–‡ä»¶ï¼ˆ.tdf æ–‡ä»¶ï¼‰å¹¶å•å‡»â€œæ‰“å¼€â€ã€‚ <img src="'+k+'" alt="é€‰æ‹©æ¨¡æ¿"></p></li><li><p>æ–°å»ºè·Ÿè¸ªæ—¶å¯ä»¥çœ‹åˆ°ï¼Œè·Ÿè¸ªæ¨¡æ¿æ–‡ä»¶å°±æ·»åŠ ä¸º â€œè·Ÿè¸ªå±æ€§â€ å¯¹è¯æ¡†çš„ â€œä½¿ç”¨æ¨¡æ¿â€ åˆ—è¡¨ä¸­çš„å¯ç”¨æ¨¡æ¿ã€‚ ç”¨æˆ·å®šä¹‰çš„æ¨¡æ¿å°†åœ¨æ¨¡æ¿åç§°åè¿½åŠ  (ç”¨æˆ·æˆ–è€…user) ã€‚ <img src="'+m+'" alt="æ–°å»ºè·Ÿè¸ª"></p></li></ol><hr><h2 id="æ–°å»ºè¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#æ–°å»ºè¿è¡Œ"><span>æ–°å»ºè¿è¡Œ</span></a></h2><ol><li>åœ¨ â€œæ–‡ä»¶â€ èœå•ä¸Šï¼Œå•å‡» â€œæ–°å»ºè·Ÿè¸ªâ€ ï¼Œå¹¶è¿æ¥åˆ° SQL Serverå®ä¾‹ã€‚æ­¤æ—¶ï¼Œå°†æ˜¾ç¤º â€œè·Ÿè¸ªå±æ€§â€ å¯¹è¯æ¡†ã€‚</li><li>åœ¨ â€œè·Ÿè¸ªåç§°â€ æ¡†ä¸­ï¼Œè¾“å…¥è·Ÿè¸ªçš„åç§°ã€‚ä¾‹å¦‚ï¼šæ­»é”è·Ÿè¸ª_202107030800</li><li>åœ¨ â€œä½¿ç”¨æ¨¡æ¿â€ åˆ—è¡¨ä¸­ï¼Œé€‰æ‹©ä¸€ä¸ªè·Ÿè¸ªæ¨¡æ¿ã€‚ä¾‹å¦‚ï¼šæ­»é”è·Ÿè¸ªï¼ˆç”¨æˆ·ï¼‰</li><li>å•å‡»â€œä¿å­˜åˆ°æ–‡ä»¶â€ï¼ŒæŒ‡å®šè·Ÿè¸ªå†…å®¹ä¿å­˜çš„ç›®å½•ã€‚</li><li>æŒ‡å®š â€œè®¾ç½®æœ€å¤§æ–‡ä»¶å¤§å°â€ çš„å€¼ä¸º 200 MBï¼ˆæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰</li><li>é€‰æ‹© â€œå¯ç”¨æ–‡ä»¶æ»šåŠ¨æ›´æ–°â€ ã€‚ï¼ˆç”Ÿæˆçš„è·Ÿè¸ªæ–‡ä»¶å¤§å°è¾¾åˆ°æœ€å¤§å€¼æ—¶è‡ªåŠ¨åˆ›å»ºæ–°æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼šæ­»é”è·Ÿè¸ª_202107030800.trc,æ­»é”è·Ÿè¸ª_202107030800_1.trcï¼Œæ­»é”è·Ÿè¸ª_202107030800_2.trcï¼‰</li><li>â€œå¯ç”¨è·Ÿè¸ªåœæ­¢æ—¶é—´â€ ï¼Œæ ¹æ®éœ€è¦æŒ‡å®šåœæ­¢æ—¥æœŸå’Œæ—¶é—´ã€‚</li><li>è¿è¡Œ <img src="'+b+'" alt="æ–°å»ºè·Ÿè¸ª"></li></ol><hr><h2 id="æš‚åœæˆ–åœæ­¢" tabindex="-1"><a class="header-anchor" href="#æš‚åœæˆ–åœæ­¢"><span>æš‚åœæˆ–åœæ­¢</span></a></h2><ol><li>é€‰ä¸­ä¸€ä¸ªåŒ…å«æ­£åœ¨è¿è¡Œçš„è·Ÿè¸ªçš„çª—å£ã€‚åœ¨ â€œæ–‡ä»¶â€ èœå•ä¸Šï¼Œå•å‡» â€œæš‚åœè·Ÿè¸ªâ€ æˆ–â€œåœæ­¢è·Ÿè¸ªâ€ã€‚</li><li>åœ¨åŒ…å«æ­£åœ¨è¿è¡Œçš„è·Ÿè¸ªçš„çª—å£ï¼Œå³å‡»ï¼Œåœ¨å³å‡»èœå•ä¸Šï¼Œå•å‡» â€œæš‚åœè·Ÿè¸ªâ€ æˆ–â€œåœæ­¢è·Ÿè¸ªâ€ã€‚</li><li>é€‰ä¸­ä¸€ä¸ªåŒ…å«æ­£åœ¨è¿è¡Œçš„è·Ÿè¸ªçš„çª—å£ã€‚åœ¨å·¥å…·æ ä¸Šï¼Œç‚¹å‡»â€œæš‚åœè·Ÿè¸ªâ€æˆ–â€œåœæ­¢è·Ÿè¸ªâ€ã€‚ <img src="'+_+'" alt="æš‚åœæˆ–åœæ­¢è·Ÿè¸ª"></li></ol><blockquote><p>æ³¨æ„ è·Ÿè¸ªè¿è¡Œæ—¶ï¼Œå¯ä»¥æŸ¥çœ‹å±æ€§ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹å±æ€§ã€‚ è‹¥è¦ä¿®æ”¹å±æ€§ï¼Œè¯·åœæ­¢æˆ–æš‚åœè·Ÿè¸ªã€‚ åœæ­¢æˆ–æš‚åœåï¼Œå¯ä»¥æ›´æ”¹åç§°ã€äº‹ä»¶ã€åˆ—å’Œç­›é€‰å™¨ã€‚ ä½†æ˜¯ä¸èƒ½æ›´æ”¹æœåŠ¡å™¨è¿æ¥</p></blockquote><hr><h2 id="æ”¶é›†è·Ÿè¸ªæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#æ”¶é›†è·Ÿè¸ªæ–‡ä»¶"><span>æ”¶é›†è·Ÿè¸ªæ–‡ä»¶</span></a></h2><ol><li>åœæ­¢è·Ÿè¸ªã€‚</li><li>åˆ°è·Ÿè¸ªä¿å­˜ç›®å½•æ‰¾åˆ°è·Ÿè¸ªæ–‡ä»¶.trcã€‚ï¼ˆå¯åœ¨è·Ÿè¸ªå±æ€§ä¸­æŸ¥çœ‹ä¿å­˜æ–‡ä»¶ç›®å½•ï¼‰</li><li>å‹ç¼©åä¼ å›ã€‚==å‹ç¼©ç‡å¯è¾¾1%ï¼Œå¼ºçƒˆå»ºè®®å‹ç¼©==</li></ol><h2 id="" tabindex="-1"><a class="header-anchor" href="#"><span><img src="'+h+'" alt="è·Ÿè¸ªæ–‡ä»¶"></span></a></h2><h1 id="è¿›é˜¶" tabindex="-1"><a class="header-anchor" href="#è¿›é˜¶"><span>è¿›é˜¶</span></a></h1><h2 id="_1-æ ¹æ®æŠ¥é”™ä¿¡æ¯æŸ¥æ‰¾å‡ºé”™çš„sqlè¯­å¥" tabindex="-1"><a class="header-anchor" href="#_1-æ ¹æ®æŠ¥é”™ä¿¡æ¯æŸ¥æ‰¾å‡ºé”™çš„sqlè¯­å¥"><span>1. æ ¹æ®æŠ¥é”™ä¿¡æ¯æŸ¥æ‰¾å‡ºé”™çš„SQLè¯­å¥</span></a></h2><p>1.1 æ–°å»ºè·Ÿè¸ªæ—¶ï¼Œé€‰æ‹© <strong>Errors and Warnings</strong>ç»„ä¸‹çš„<strong>Exception</strong>å’Œ<strong>User Error Message</strong>äº‹ä»¶</p><p><img src="'+g+`" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>1.2. ä¾‹å¦‚ æ‰§è¡ŒSQLè¯­å¥</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> SMInvoiceDetail <span class="token keyword">where</span> InvoiceNo <span class="token operator">=</span> d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>æ¶ˆæ¯ æ¶ˆæ¯ 207ï¼Œçº§åˆ« 16ï¼ŒçŠ¶æ€ 1ï¼Œç¬¬ 1 è¡Œ åˆ—å &#39;d&#39; æ— æ•ˆã€‚</p></blockquote><p>1.3. è·Ÿè¸ªç»“æœ</p><p><img src="`+f+'" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="_2-t-sqlè¯­å¥åˆ›å»ºè·Ÿè¸ª" tabindex="-1"><a class="header-anchor" href="#_2-t-sqlè¯­å¥åˆ›å»ºè·Ÿè¸ª"><span>2. T-SQLè¯­å¥åˆ›å»ºè·Ÿè¸ª</span></a></h2>',36),I={href:"https://docs.microsoft.com/zh-cn/sql/tools/sql-server-profiler/sql-server-profiler?view=sql-server-ver15",target:"_blank",rel:"noopener noreferrer"},D=l(`<h3 id="_2-1-åˆ›å»ºè·Ÿè¸ª" tabindex="-1"><a class="header-anchor" href="#_2-1-åˆ›å»ºè·Ÿè¸ª"><span>2.1. åˆ›å»ºè·Ÿè¸ª</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token comment">/**************************************/</span> 
<span class="token comment">/* 1 æ–°å»ºè·Ÿè¸ªï¼ˆæ–°çš„è·Ÿè¸ªå°†å¤„äºåœæ­¢çŠ¶æ€ï¼‰ */</span>
<span class="token comment">/**************************************/</span>

<span class="token comment">/*è¿”å›ä»£ç 	æè¿°
0	æ²¡æœ‰é”™è¯¯ã€‚
1	æœªçŸ¥é”™è¯¯ã€‚
10	æ— æ•ˆé€‰é¡¹ã€‚ æŒ‡å®šçš„é€‰é¡¹ä¸å…¼å®¹æ—¶è¿”å›æ­¤ä»£ç ã€‚
12	æ–‡ä»¶æœªåˆ›å»ºã€‚
13	å†…å­˜ä¸è¶³ã€‚ åœ¨æ²¡æœ‰è¶³å¤Ÿå†…å­˜æ‰§è¡ŒæŒ‡å®šçš„æ“ä½œæ—¶è¿”å›æ­¤ä»£ç ã€‚
14	æ— æ•ˆåœæ­¢æ—¶é—´ã€‚ åœ¨æŒ‡å®šçš„åœæ­¢æ—¶é—´å·²å‘ç”Ÿæ—¶è¿”å›æ­¤ä»£ç ã€‚
15	å‚æ•°æ— æ•ˆã€‚ åœ¨ç”¨æˆ·å·²æä¾›ä¸å…¼å®¹çš„å‚æ•°æ—¶è¿”å›æ­¤ä»£ç ã€‚
*/</span>
<span class="token keyword">declare</span> <span class="token variable">@rc</span> <span class="token keyword">int</span>
<span class="token keyword">declare</span> <span class="token variable">@TraceID</span> <span class="token keyword">int</span>
<span class="token comment">-- ç”Ÿæˆçš„è·Ÿè¸ªæ–‡ä»¶æœ€å¤§å¤§å°ï¼ˆMBï¼‰ï¼Œé»˜è®¤å€¼ä¸º 5</span>
<span class="token keyword">declare</span> <span class="token variable">@maxfilesize</span> <span class="token keyword">bigint</span> 

<span class="token comment">-- æŒ‡å®šè·Ÿè¸ªå°†å†™å…¥çš„ä½ç½®å’Œæ–‡ä»¶åã€‚</span>
<span class="token comment">-- ä¾‹å¦‚c:\\MyFolder\\MyTrace\\test </span>
<span class="token comment">-- SQL Server ä¼šå°† .trc æ‰©å±•åè¿½åŠ åˆ°æ‰€æœ‰è·Ÿè¸ªæ–‡ä»¶å</span>
<span class="token keyword">declare</span> <span class="token variable">@tracefile</span> nvarchar<span class="token punctuation">(</span><span class="token number">245</span><span class="token punctuation">)</span> 

<span class="token keyword">set</span> <span class="token variable">@maxfilesize</span> <span class="token operator">=</span> <span class="token number">5</span> 

<span class="token keyword">exec</span> <span class="token variable">@rc</span> <span class="token operator">=</span> sp_trace_create <span class="token variable">@TraceID</span> output<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token variable">@tracefile</span><span class="token punctuation">,</span> <span class="token variable">@maxfilesize</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span> 
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">@rc</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> 
<span class="token keyword">begin</span>
	<span class="token keyword">select</span> ErrorCode<span class="token operator">=</span><span class="token variable">@rc</span>
	<span class="token keyword">return</span>
<span class="token keyword">end</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-åœ¨è·Ÿè¸ªä¸­æ·»åŠ äº‹ä»¶æˆ–äº‹ä»¶åˆ—" tabindex="-1"><a class="header-anchor" href="#_2-2-åœ¨è·Ÿè¸ªä¸­æ·»åŠ äº‹ä»¶æˆ–äº‹ä»¶åˆ—"><span>2.2. åœ¨è·Ÿè¸ªä¸­æ·»åŠ äº‹ä»¶æˆ–äº‹ä»¶åˆ—</span></a></h3>`,3),L=s("strong",null,"SQLæ‰§è¡Œè€—æ—¶è·Ÿè¸ª",-1),Q={href:"https://docs.microsoft.com/zh-cn/sql/relational-databases/system-stored-procedures/sp-trace-setevent-transact-sql?view=sql-server-ver15",target:"_blank",rel:"noopener noreferrer"},E=l(`<div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token comment">/**********************************/</span> 
<span class="token comment">/* 2 åœ¨è·Ÿè¸ªä¸­æ·»åŠ äº‹ä»¶æˆ–äº‹ä»¶åˆ—       */</span>
<span class="token comment">/* æ³¨æ„ï¼šä¸‹åˆ—äº‹ä»¶æ¨¡æ¿ä¸º SQLæ‰§è¡Œè€—æ—¶è·Ÿè¸ª   */</span>
<span class="token comment">/**********************************/</span>
<span class="token keyword">declare</span> <span class="token variable">@on</span> <span class="token keyword">bit</span>
<span class="token keyword">set</span> <span class="token variable">@on</span> <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
<span class="token keyword">exec</span> sp_trace_setevent <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">,</span> <span class="token variable">@on</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-è®¾ç½®è·Ÿè¸ªçš„è¿‡æ»¤æ¡ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-3-è®¾ç½®è·Ÿè¸ªçš„è¿‡æ»¤æ¡ä»¶"><span>2.3. è®¾ç½®è·Ÿè¸ªçš„è¿‡æ»¤æ¡ä»¶</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token comment">/**********************************/</span> 
<span class="token comment">/* 3 è®¾ç½®è·Ÿè¸ªçš„è¿‡æ»¤æ¡ä»¶	          */</span>
<span class="token comment">/**********************************/</span>

<span class="token comment">/* æ¯”è¾ƒçš„ç±»å‹
å€¼	æ¯”è¾ƒè¿ç®—ç¬¦
0	= (ç­‰äº)
1	&lt;&gt; (ä¸ç­‰äº)
2	&gt;ï¼ˆå¤§äºï¼‰
3	&lt; (å°äº)
4	&gt;= (å¤§äºæˆ–ç­‰äº)
5	&lt;= (å°äºæˆ–ç­‰äº)
6	LIKE
7	ä¸ç±»ä¼¼äº
*/</span>
<span class="token keyword">declare</span> <span class="token variable">@operator</span> <span class="token keyword">int</span> 
<span class="token keyword">set</span> <span class="token variable">@operator</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token comment">-- æ•°æ®åº“å</span>
<span class="token keyword">exec</span> sp_trace_setfilter <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">,</span> <span class="token variable">@operator</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> N<span class="token string">&#39;test&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-å¯åŠ¨è·Ÿè¸ª" tabindex="-1"><a class="header-anchor" href="#_2-4-å¯åŠ¨è·Ÿè¸ª"><span>2.4. å¯åŠ¨è·Ÿè¸ª</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token comment">/**********************************/</span> 
<span class="token comment">/* 4 å¯åŠ¨è·Ÿè¸ª	          */</span>
<span class="token comment">/**********************************/</span>

<span class="token comment">/*çŠ¶æ€	è¯´æ˜
0	åœæ­¢æŒ‡å®šçš„è·Ÿè¸ªã€‚
1	å¯åŠ¨æŒ‡å®šçš„è·Ÿè¸ªã€‚
2	å…³é—­æŒ‡å®šçš„è·Ÿè¸ªå¹¶ä»æœåŠ¡å™¨ä¸­åˆ é™¤å…¶å®šä¹‰ã€‚
*/</span>
<span class="token keyword">exec</span> sp_trace_setstatus <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">1</span>

<span class="token keyword">select</span> TraceID<span class="token operator">=</span><span class="token variable">@TraceID</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-5-åœæ­¢è·Ÿè¸ª" tabindex="-1"><a class="header-anchor" href="#_2-5-åœæ­¢è·Ÿè¸ª"><span>2.5. åœæ­¢è·Ÿè¸ª</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token comment">/**********************************/</span> 
<span class="token comment">/* 5 åœæ­¢è·Ÿè¸ª          */</span>
<span class="token comment">/**********************************/</span>
<span class="token comment">/*çŠ¶æ€	è¯´æ˜
0	åœæ­¢æŒ‡å®šçš„è·Ÿè¸ªã€‚
1	å¯åŠ¨æŒ‡å®šçš„è·Ÿè¸ªã€‚
2	å…³é—­æŒ‡å®šçš„è·Ÿè¸ªå¹¶ä»æœåŠ¡å™¨ä¸­åˆ é™¤å…¶å®šä¹‰ã€‚
*/</span>
<span class="token keyword">exec</span> sp_trace_setstatus <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">0</span>
<span class="token keyword">exec</span> sp_trace_setstatus <span class="token variable">@TraceID</span><span class="token punctuation">,</span> <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-6-æŸ¥è¯¢è·Ÿè¸ªä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_2-6-æŸ¥è¯¢è·Ÿè¸ªä¿¡æ¯"><span>2.6. æŸ¥è¯¢è·Ÿè¸ªä¿¡æ¯</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token comment">/**********************************/</span> 
<span class="token comment">/* é™„å½• æŸ¥è¯¢æ­£åœ¨è¿è¡Œçš„è·Ÿè¸ª          */</span>
<span class="token comment">/**********************************/</span>

<span class="token comment">/*  å‚æ•°ï¼š 
	æŒ‡å®š NULLã€0 æˆ– DEFAULT å¯è¿”å› SQL Server å®ä¾‹ä¸­æ‰€æœ‰è·Ÿè¸ªçš„ä¿¡æ¯

	è¿”å›çš„è¡¨ï¼š
	åˆ—åç§°	 æ•°æ®ç±»å‹	 è¯´æ˜
	traceid	 int	è·Ÿè¸ªçš„ IDã€‚
	property int	è·Ÿè¸ªçš„å±æ€§ï¼š
					1= è·Ÿè¸ªé€‰é¡¹ã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯· @options å‚é˜… (transact-sql)sp_trace_create
					2 = æ–‡ä»¶å
					3 = æœ€å¤§å¤§å°
					4 = åœæ­¢æ—¶é—´
					5 = å½“å‰è·Ÿè¸ªçŠ¶æ€ã€‚ 0 = åœæ­¢ã€‚ 1 = æ­£åœ¨è¿è¡Œã€‚
	value sql_variant	æœ‰å…³æŒ‡å®šè·Ÿè¸ªçš„å±æ€§çš„ä¿¡æ¯ã€‚
*/</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> sys<span class="token punctuation">.</span>fn_trace_getinfo<span class="token punctuation">(</span><span class="token variable">@TraceID</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9);function M(N,P){const a=p("ExternalLinkIcon");return c(),i("div",null,[x,w,y,s("blockquote",null,[s("p",null,[n("æç¤º å¾®è½¯å®˜æ–¹æç¤º Microsoft SQL Server 2014 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œå·²å¼ƒç”¨ SQL è·Ÿè¸ªå’Œ SQL Server Profilerã€‚åç»­ç‰ˆæœ¬çš„ Microsoft SQL Server å°†åˆ é™¤è¯¥åŠŸèƒ½ã€‚ è¯·é¿å…åœ¨æ–°çš„å¼€å‘å·¥ä½œä¸­ä½¿ç”¨è¯¥åŠŸèƒ½ï¼Œå¹¶ç€æ‰‹ä¿®æ”¹å½“å‰è¿˜åœ¨ä½¿ç”¨è¯¥åŠŸèƒ½çš„åº”ç”¨ç¨‹åºã€‚ è¯·æ”¹ç”¨"),s("a",S,[n("æ‰©å±•äº‹ä»¶"),e(a)]),n("ã€‚")])]),T,s("p",null,[n("è·Ÿè¸ªå¯ä»¥ç”±SQL Serverå·¥å…· "),s("a",I,[n("SQL Server Profiler"),e(a)]),n(" å›¾å½¢ç•Œé¢åˆ›å»ºï¼Œä¹Ÿå¯ä»¥ç”±T-SQLè¯­å¥åˆ›å»ºã€‚åé¢å°ç‚¹ä»‹ç»ä½¿ç”¨T-SQL")]),D,s("blockquote",null,[s("p",null,[n("æ³¨æ„ï¼šä¸‹åˆ—äº‹ä»¶æ¨¡æ¿ä¸º "),L,n("ã€‚å¯æ ¹æ®å®é™…æƒ…å†µå¢åˆ äº‹ä»¶æˆ–äº‹ä»¶åˆ—ã€‚ è¯¦ç»†äº‹ä»¶IDå’Œäº‹ä»¶åˆ—IDè§ï¼š"),s("a",Q,[n("MSDNæ–‡æ¡£ï¼š sp_trace_setevent (Transact-SQL) "),e(a)])])]),E])}const B=t(q,[["render",M],["__file","sqlserver-profiler.html.vue"]]),C=JSON.parse('{"path":"/sql-server/sqlserver-profiler.html","title":"SQL Server Profiler ç®€ä»‹","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"å¯¼å…¥è·Ÿè¸ªæ¨¡æ¿","slug":"å¯¼å…¥è·Ÿè¸ªæ¨¡æ¿","link":"#å¯¼å…¥è·Ÿè¸ªæ¨¡æ¿","children":[]},{"level":2,"title":"æ–°å»ºè¿è¡Œ","slug":"æ–°å»ºè¿è¡Œ","link":"#æ–°å»ºè¿è¡Œ","children":[]},{"level":2,"title":"æš‚åœæˆ–åœæ­¢","slug":"æš‚åœæˆ–åœæ­¢","link":"#æš‚åœæˆ–åœæ­¢","children":[]},{"level":2,"title":"æ”¶é›†è·Ÿè¸ªæ–‡ä»¶","slug":"æ”¶é›†è·Ÿè¸ªæ–‡ä»¶","link":"#æ”¶é›†è·Ÿè¸ªæ–‡ä»¶","children":[]},{"level":2,"title":"","slug":"","link":"#","children":[]},{"level":2,"title":"1.  æ ¹æ®æŠ¥é”™ä¿¡æ¯æŸ¥æ‰¾å‡ºé”™çš„SQLè¯­å¥","slug":"_1-æ ¹æ®æŠ¥é”™ä¿¡æ¯æŸ¥æ‰¾å‡ºé”™çš„sqlè¯­å¥","link":"#_1-æ ¹æ®æŠ¥é”™ä¿¡æ¯æŸ¥æ‰¾å‡ºé”™çš„sqlè¯­å¥","children":[]},{"level":2,"title":"2. T-SQLè¯­å¥åˆ›å»ºè·Ÿè¸ª","slug":"_2-t-sqlè¯­å¥åˆ›å»ºè·Ÿè¸ª","link":"#_2-t-sqlè¯­å¥åˆ›å»ºè·Ÿè¸ª","children":[{"level":3,"title":"2.1. åˆ›å»ºè·Ÿè¸ª","slug":"_2-1-åˆ›å»ºè·Ÿè¸ª","link":"#_2-1-åˆ›å»ºè·Ÿè¸ª","children":[]},{"level":3,"title":"2.2. åœ¨è·Ÿè¸ªä¸­æ·»åŠ äº‹ä»¶æˆ–äº‹ä»¶åˆ—","slug":"_2-2-åœ¨è·Ÿè¸ªä¸­æ·»åŠ äº‹ä»¶æˆ–äº‹ä»¶åˆ—","link":"#_2-2-åœ¨è·Ÿè¸ªä¸­æ·»åŠ äº‹ä»¶æˆ–äº‹ä»¶åˆ—","children":[]},{"level":3,"title":"2.3. è®¾ç½®è·Ÿè¸ªçš„è¿‡æ»¤æ¡ä»¶","slug":"_2-3-è®¾ç½®è·Ÿè¸ªçš„è¿‡æ»¤æ¡ä»¶","link":"#_2-3-è®¾ç½®è·Ÿè¸ªçš„è¿‡æ»¤æ¡ä»¶","children":[]},{"level":3,"title":"2.4. å¯åŠ¨è·Ÿè¸ª","slug":"_2-4-å¯åŠ¨è·Ÿè¸ª","link":"#_2-4-å¯åŠ¨è·Ÿè¸ª","children":[]},{"level":3,"title":"2.5. åœæ­¢è·Ÿè¸ª","slug":"_2-5-åœæ­¢è·Ÿè¸ª","link":"#_2-5-åœæ­¢è·Ÿè¸ª","children":[]},{"level":3,"title":"2.6. æŸ¥è¯¢è·Ÿè¸ªä¿¡æ¯","slug":"_2-6-æŸ¥è¯¢è·Ÿè¸ªä¿¡æ¯","link":"#_2-6-æŸ¥è¯¢è·Ÿè¸ªä¿¡æ¯","children":[]}]}],"git":{"updatedTime":1709905504000},"filePathRelative":"sql-server/sqlserver-profiler.md"}');export{B as comp,C as data};
