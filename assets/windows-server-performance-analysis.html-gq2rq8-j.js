import{_ as e,o as t,c as a,e as r}from"./app-CUvyzFzm.js";const o="/document/images/resource-monitor/Open.jpg",s="/document/images/resource-monitor/Open_cmd.jpg",i="/document/images/resource-monitor/CPU.jpg",n="/document/images/resource-monitor/Memory.jpg",l="/document/images/resource-monitor/HardDisk.jpg",p="/document/images/resource-monitor/NetWork.jpg",c="/document/images/performance-monitor/Summary.jpg",d="/document/images/performance-monitor/CreateNewDataCollector.jpg",h="/document/images/performance-monitor/CreateNewDataCollector_Name.jpg",m="/document/images/performance-monitor/CreateNewDataCollector_Type.jpg",_="/document/images/performance-monitor/CreateNewDataCollector_AddCounter.jpg",g="/document/images/performance-monitor/CreateNewDataCollector_SelectCounter.jpg",u="/document/images/performance-monitor/CreateNewDataCollector_DataFilePath.jpg",f="/document/images/performance-monitor/CreateNewDataCollector_Finish.jpg",C="/document/images/performance-monitor/DataCollector_Properties_StopCondition.jpg",D="/document/images/performance-monitor/DataCollector_Start.jpg",w={},k=r('<h1 id="windows-server-系统的性能分析" tabindex="-1"><a class="header-anchor" href="#windows-server-系统的性能分析"><span>Windows Server 系统的性能分析</span></a></h1><p>windows系统的性能分析可以通过以下两种工具进行：</p><ul><li>资源监视器：实时查看系统性能数据。可以查看系统的硬件资源（CPU、内存、硬盘、网络）的详细实时信息。</li><li>性能监视器：记录到日志。可以通过创建<code>数据收集器</code>，将系统性能数据写到日志文件中。</li></ul><hr><h2 id="_1-资源监视器" tabindex="-1"><a class="header-anchor" href="#_1-资源监视器"><span>1 资源监视器</span></a></h2><h3 id="_1-1打开资源监视器" tabindex="-1"><a class="header-anchor" href="#_1-1打开资源监视器"><span>1.1打开资源监视器</span></a></h3><ul><li><p>通过开始菜单打开。</p><p>依次单击&quot;开始&quot;、&quot;<strong>Windows 管理工具</strong>&quot;，右键单击&quot;<strong>资源监视器</strong>&quot;，然后点击&quot;<strong>以管理员身份运行</strong>&quot;。</p><p><img src="'+o+'" alt="Open"></p></li><li><p>通过命令提示符打开。</p><p>在**&quot;运行&quot;**窗口中输入命令<code>perfmon /res</code></p><p><img src="'+s+'" alt="Open_cmd"></p></li></ul><h3 id="_1-2-cpu" tabindex="-1"><a class="header-anchor" href="#_1-2-cpu"><span>1.2 CPU</span></a></h3><p>可以通过对<code>CPU</code>或<code>平均CPU</code>列倒序排序，获得使用CPU资源最大的应用程序或服务。</p><p><img src="'+i+'" alt="CPU"></p><h3 id="_1-3-内存" tabindex="-1"><a class="header-anchor" href="#_1-3-内存"><span>1.3 内存</span></a></h3><p><img src="'+n+'" alt="Memory"></p><h3 id="_1-4-硬盘" tabindex="-1"><a class="header-anchor" href="#_1-4-硬盘"><span>1.4 硬盘</span></a></h3><p><img src="'+l+'" alt="HardDisk"></p><h3 id="_1-5-网络" tabindex="-1"><a class="header-anchor" href="#_1-5-网络"><span>1.5 网络</span></a></h3><p><img src="'+p+'" alt="NetWork"></p><hr><h2 id="_2-性能监视器" tabindex="-1"><a class="header-anchor" href="#_2-性能监视器"><span>2 性能监视器</span></a></h2><h3 id="_2-1-打开性能监视器" tabindex="-1"><a class="header-anchor" href="#_2-1-打开性能监视器"><span>2.1 打开性能监视器</span></a></h3><ul><li><p>通过开始菜单打开。</p><p>依次单击&quot;开始&quot;、&quot;<strong>Windows 管理工具</strong>&quot;，右键单击&quot;<strong>性能监视器</strong>&quot;，然后点击&quot;<strong>以管理员身份运行</strong>&quot;。</p></li><li><p>通过命令提示符打开。</p><p>在**&quot;运行&quot;**窗口中输入命令<code>perfmon</code></p></li></ul><p><img src="'+c+'" alt="Summary"></p><h3 id="_2-2-新建数据收集器" tabindex="-1"><a class="header-anchor" href="#_2-2-新建数据收集器"><span>2.2 新建数据收集器</span></a></h3><h4 id="_2-2-1-新建数据收集器" tabindex="-1"><a class="header-anchor" href="#_2-2-1-新建数据收集器"><span>2.2.1 新建数据收集器</span></a></h4><p><img src="'+d+'" alt="CreateNewDataCollector"></p><h4 id="_2-2-2-设置-数据收集器-名称和创建方式" tabindex="-1"><a class="header-anchor" href="#_2-2-2-设置-数据收集器-名称和创建方式"><span>2.2.2 设置&quot;数据收集器&quot;名称和创建方式</span></a></h4><p><img src="'+h+'" alt="CreateNewDataCollector_Name"></p><h4 id="_2-2-3-选择收集的类型数据" tabindex="-1"><a class="header-anchor" href="#_2-2-3-选择收集的类型数据"><span>2.2.3 选择收集的类型数据</span></a></h4><p><img src="'+m+'" alt="CreateNewDataCollector_Type"></p><h4 id="_2-2-4-选择性能计数器" tabindex="-1"><a class="header-anchor" href="#_2-2-4-选择性能计数器"><span>2.2.4 选择性能计数器</span></a></h4><p><img src="'+_+'" alt="CreateNewDataCollector_AddCounter"></p><p>添加以下计数器：</p><ul><li><code>PhysicalDisk</code>：物理磁盘</li></ul><p><img src="'+g+'" alt="CreateNewDataCollector_SelectCounter"></p><ul><li><code>Processor</code>： CPU。步骤同上。</li></ul><p>​ 添加计数器后继续<code>&quot;下一页&quot;</code>。</p><h4 id="_2-2-5-设置日志保存路径" tabindex="-1"><a class="header-anchor" href="#_2-2-5-设置日志保存路径"><span>2.2.5 设置日志保存路径</span></a></h4><p><img src="'+u+'" alt="CreateNewDataCollector_DataFilePath"></p><h4 id="_2-2-6-创建完成" tabindex="-1"><a class="header-anchor" href="#_2-2-6-创建完成"><span>2.2.6 创建完成</span></a></h4><p><img src="'+f+'" alt="CreateNewDataCollector_Finish"></p><p>==设置&quot;性能收集器&quot;的持续时间==</p><p><img src="'+C+'" alt="DataCollector_Properties_StopCondition"></p><h3 id="_2-3-启动-数据收集器" tabindex="-1"><a class="header-anchor" href="#_2-3-启动-数据收集器"><span>2.3 启动&quot;数据收集器&quot;</span></a></h3><p><img src="'+D+'" alt="CreateNewDataCollector"></p><h3 id="计数器的日志解读" tabindex="-1"><a class="header-anchor" href="#计数器的日志解读"><span>计数器的日志解读*</span></a></h3><h4 id="physical-disk" tabindex="-1"><a class="header-anchor" href="#physical-disk"><span>Physical Disk</span></a></h4><ul><li><p>单次I/O大小</p><p>Avg. Disk Bytes/Read 单次Read I/O大小（bytes）</p><p>Avg. Disk Bytes/Write 单次Write I/O大小（bytes）</p></li><li><p>I/O响应时间</p><p>Avg. Disk sec/Read 每次读取所需时间(ms)，理想范围&lt;15ms</p><p>Avg. Disk sec/Write 每次写入所需时间(ms)，理想范围&lt;15ms</p><p>Avg. Disk sec/Transfer 每次读取/写入所需时间(ms)</p></li><li><p>队列长度</p><p>Avg. Disk Queue Length 磁盘平均队列长度，理想范围&lt;=2（资源监视器中的磁盘队列长度）</p></li><li><p>当前IOPS</p><p>Disk Reads/sec 每秒读取操作的速率。</p><p>Disk Writes/sec 每秒写入操作的速率。</p><p>Disk Transfers/sec 每秒读取/写入操作总速率。</p><blockquote><p><strong>IOPS参考值</strong></p><p>==机械硬盘==</p><p>​ 理论最大IOPS计算公式：IOPS = 1000 ms/ ( <code>SeekTime</code> + <code>RotationalLatency</code> )</p><p>​ <code>SeekTime</code>：磁头寻道时间。硬盘标称数据，一般产品范围在3-15ms。</p><p>​ <code>RotationalLatency</code>:盘片旋转延迟时间。例如，若机械硬盘转速7200rpm，则每圈用时≈8.33ms（60*1000/7200≈8.33），然后取半圈中间值≈4.16。</p><p>​</p><p>​ 最大IOPS参考值：</p><p>​ SATA 7200 rpm ≈ 80 IOPS</p><p>​ SAS 10K rpm ≈ 140 IOPS</p><p>​ SAS 15 rpm ≈ 180 IOPS</p><p>==固态硬盘==</p><p>​ 参考官方IOPS数据</p><p><strong>IOPS实际值</strong></p><p>​ 可以通过 <code>CrystalDiskMark</code>、<code>AS SSDBenchMark</code>等硬盘测试跑分软件实测得出。</p></blockquote></li><li><p>RAID阵列的每块硬盘IOPS计算</p></li></ul><table><thead><tr><th style="text-align:left;">RAID</th><th style="text-align:left;">每块硬盘的IOPS(n)</th></tr></thead><tbody><tr><td style="text-align:left;">RAID 0</td><td style="text-align:left;">n = (reads+writes)/硬盘数</td></tr><tr><td style="text-align:left;">RAID 1/RAID 10</td><td style="text-align:left;">n = (reads+ (2*writes))/硬盘数</td></tr><tr><td style="text-align:left;">RAID 5</td><td style="text-align:left;">n = (reads+ (4*writes))/硬盘数</td></tr></tbody></table><p>例如：跟踪到硬盘最大负荷时(Disk Reads/sec = 320，Disk Writes/sec = 100)，RAID 5组合，硬盘数=4，硬盘的最大IOPS=140.</p><p>​ 根据公式计算得出：每块硬盘的IOPS=(320+(4*100))/4 =180；则大于实际的140 IOPS。</p><p>​ 那么要多少块硬盘组RAID 5才能满足180IOPS：720/140≈5.1428，则需要6块硬盘。</p>',50),S=[k];function P(y,q){return t(),a("div",null,S)}const x=e(w,[["render",P],["__file","windows-server-performance-analysis.html.vue"]]),I=JSON.parse('{"path":"/windows-server/windows-server-performance-analysis.html","title":"Windows Server 系统的性能分析","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"1 资源监视器","slug":"_1-资源监视器","link":"#_1-资源监视器","children":[{"level":3,"title":"1.1打开资源监视器","slug":"_1-1打开资源监视器","link":"#_1-1打开资源监视器","children":[]},{"level":3,"title":"1.2 CPU","slug":"_1-2-cpu","link":"#_1-2-cpu","children":[]},{"level":3,"title":"1.3 内存","slug":"_1-3-内存","link":"#_1-3-内存","children":[]},{"level":3,"title":"1.4 硬盘","slug":"_1-4-硬盘","link":"#_1-4-硬盘","children":[]},{"level":3,"title":"1.5 网络","slug":"_1-5-网络","link":"#_1-5-网络","children":[]}]},{"level":2,"title":"2 性能监视器","slug":"_2-性能监视器","link":"#_2-性能监视器","children":[{"level":3,"title":"2.1 打开性能监视器","slug":"_2-1-打开性能监视器","link":"#_2-1-打开性能监视器","children":[]},{"level":3,"title":"2.2 新建数据收集器","slug":"_2-2-新建数据收集器","link":"#_2-2-新建数据收集器","children":[]},{"level":3,"title":"2.3 启动\\"数据收集器\\"","slug":"_2-3-启动-数据收集器","link":"#_2-3-启动-数据收集器","children":[]},{"level":3,"title":"计数器的日志解读*","slug":"计数器的日志解读","link":"#计数器的日志解读","children":[]}]}],"git":{"updatedTime":1709905504000},"filePathRelative":"windows-server/windows-server-performance-analysis.md"}');export{x as comp,I as data};
